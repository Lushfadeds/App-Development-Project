{% extends "base.html" %}
{% block title %}Analytics{% endblock%}
{% block content %}

<link href="{{ url_for('static', filename='analytics.css') }}" rel="stylesheet">

<div class="container-fluid p-0">
    <div class="row">

        {% include "includes/staff_navbar.html"%}

        <div class="col-9 mx-auto my-5">

            <form action="/add_graph" method="POST" class="form card pb-4 pt-3 w-50 mx-auto px-4 mb-5">

                <h1>Analytics</h1>
                <div>
                    <label for="products_sold">Day:</label><br>
                    <input type="number" id="day" name="day" required>
                    <br>
                </div>

                <div>
                    <label for="products_sold">Products Sold Today:</label><br>
                    <input type="number" id="products_sold" name="products_sold" required>
                    <br>
                </div>

                <div>
                    <label for="sales_today">Sales Today: </label><br>
                    <input type="number" id="sales_today" name="sales_today" required>
                    <br>
                </div>

                <div>
                    <label for="customers_today">Customers Today: </label><br>
                    <input type="number" id="customers_today" name="customers_today" required>
                    <br>
                </div>

                <div>
                    <label for="unique_customers_today">Unique Customers Today: </label><br>
                    <input type="number" id="unique_customers_today" name="unique_customers_today" required>
                    <br>
                </div>

                <div>
                    <label for="money_spent_customer">Average Money Spent Per Customer: </label><br>
                    <input type="number" id="money_spent_customer" name="money_spent_customer" required>
                    <br>
                </div>


                <button type="submit" class="btn btn-success w-25">Submit Data</button>
                {% with messages = get_flashed_messages() %}
                    {% if messages %}
                        {% for msg in messages %}
                            <p>{{ msg }}</p>
                        {% endfor %}
                    {% endif %}
                {% endwith %}


            </form>

            <h1 class="my-3">Record List</h1>

            <table border="2" class="table table-striped w-100">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Day</th>
                        <th>Products Sold</th>
                        <th>Daily Sale</th>
                        <th>Daily Customers</th>
                        <th>Daily Unique Customers</th>
                        <th>Money Spent Per Customer</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                    {% for stat in graph_data %}
                    <tr>
                        <td>{{ stat.id }}</td>
                        <td>{{ stat.day }}</td>
                        <td>{{ stat.products_sold }}</td>
                        <td>{{ stat.daily_sale }}</td>
                        <td>{{ stat.daily_customers }}</td>
                        <td>{{ stat.daily_unique_customers }}</td>
                        <td>{{ stat.money_spent_customer }}</td>
                        <td class="btns">
                            <a href="/update_analytics/{{ stat.id }}" id="edit-btn">
                                <button class="btn btn-primary my-1">Edit</button>
                            </a>
                            <form action="/delete_analytics/{{ stat.id }}" method="POST">
                                <button type="submit" class="btn btn-danger">Delete</button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- DONT WORRY
<div id="overlay" class="overlay">
    <div class="overlay-content">
        <div class="overlay-header">
            <h2>Update Statistics</h2>
            <button class="close-btn" id="close-btn">&times;</button>
        </div>
        <form method="POST" class="overlay-form px-3">
            <div>
                <label for="products_sold">Products Sold Today: </label>
                <input type="text" id="name" name="name" required>
                <br>
            </div>

            <div>
                <label for="value">Sales Today: </label>
                <input type="text" id="value" name="value" required>
                <br>
            </div>

            <div>
                <label for="value">Customers Today: </label>
                <input type="text" id="value" name="value" required>
                <br>
            </div>

            <div>
                <label for="value">Unique Customers Today: </label>
                <input type="text" id="value" name="value" required>
                <br>
            </div>

            <div>
                <label for="value">Average Money Spent Per Customer: </label>
                <input type="text" id="value" name="value" required>
                <br>
            </div>

            <button type="submit">Update</button>

        </form>
    </div>
</div> -->

{% endblock %}